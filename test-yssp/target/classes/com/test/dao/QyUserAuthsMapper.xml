<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.test.dao.QyUserAuthsMapper">
	<resultMap id="BaseResultMap" type="com.test.pojo.QyUserAuths">
		<id column="qy_user_auths_id" property="qyUserAuthsId" jdbcType="INTEGER" />
		<result column="primaryKeyId" property="primarykeyid" jdbcType="BIGINT" />
		<result column="identity_type" property="identityType"
			jdbcType="VARCHAR" />
		<result column="identifier" property="identifier" jdbcType="VARCHAR" />
		<result column="credential" property="credential" jdbcType="VARCHAR" />
		<result column="verified" property="verified" jdbcType="TINYINT" />
		<result column="auths_remark" property="authsRemark" jdbcType="VARCHAR" />
	</resultMap>
	<sql id="Base_Column_List">
		qy_user_auths_id, primaryKeyId, identity_type, identifier,
		credential, verified,
		auths_remark
	</sql>
	<select id="selectByQyUserAuthsList" resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from qy_user_auths
		where identity_type =
		#{identityType,jdbcType=VARCHAR}
		and
		identifier=#{identifier,jdbcType=VARCHAR}
	</select>

	<!-- 根据用户id和权限类型查询用户权限详细信息 -->
	<select id="getQyUserAuthsByUserIdAndType" resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from qy_user_auths
		where
		identity_type =
		#{identityType,jdbcType=VARCHAR}
		and
		primaryKeyId=#{primaryKeyId,jdbcType=BIGINT}
	</select>


	<!-- 添加一个权限登录信息 -->
	<insert id="insert">
		insert into qy_user_auths
		(qy_user_auths_id, primaryKeyId,
		identity_type,
		identifier, credential,
		verified,
		auths_remark)
		values
		<foreach collection="list" item="userAuth" separator=",">
			(#{userAuth.qyUserAuthsId},
			#{userAuth.primarykeyid},
			#{userAuth.identityType},
			#{userAuth.identifier},
			#{userAuth.credential},
			#{userAuth.verified},
			#{userAuth.authsRemark})
		</foreach>
	</insert>

</mapper>