<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.test.dao.YsspArtworkMapper">
	<resultMap id="BaseResultMap" type="com.test.pojo.YsspArtwork">
		<id column="artwork_id" property="artworkId" jdbcType="BIGINT" />
		<result column="artwork_name" property="artworkName" jdbcType="VARCHAR" />
		<result column="artwork_authorId" property="artworkAuthorid"
			jdbcType="BIGINT" />
		<result column="artwork_type" property="artworkType" jdbcType="TINYINT" />
		<result column="artwork_width" property="artworkWidth"
			jdbcType="VARCHAR" />
		<result column="artwork_height" property="artworkHeight"
			jdbcType="VARCHAR" />
		<result column="artwork_weigth" property="artworkWeigth"
			jdbcType="VARCHAR" />
		<result column="artwork_year" property="artworkYear" jdbcType="VARCHAR" />
		<result column="artwork_Label" property="artworkLabel"
			jdbcType="VARCHAR" />
		<result column="artwork_examine_status" property="artworkExamineStatus"
			jdbcType="TINYINT" />
		<result column="artwork_status" property="artworkStatus"
			jdbcType="TINYINT" />
		<result column="artwork_createTime" property="artworkCreatetime"
			jdbcType="VARCHAR" />
		<result column="artwork_updateTime" property="artworkUpdatetime"
			jdbcType="VARCHAR" />
		<result column="artwork_Auditor" property="artworkAuditor"
			jdbcType="BIGINT" />
		<result column="artwork_browse_Number" property="artworkBrowseNumber"
			jdbcType="BIGINT" />
		<result column="artwork_comment_Number" property="artworkCommentNumber"
			jdbcType="BIGINT" />
		<result column="artwork_likes_Number" property="artworkLikesNumber"
			jdbcType="BIGINT" />
		<result column="artwork_share_Number" property="artworkShareNumber"
			jdbcType="BIGINT" />
		<result column="artwork_remark" property="artworkRemark"
			jdbcType="VARCHAR" />
		<result column="artwork_accredit_user" property="artworkAccreditUser" 
			jdbcType="BIGINT" />
		<result column="customArtworkId" property="customArtworkId"
			jdbcType="BIGINT" />
		<result column="customArtworkRemark" property="customArtworkRemark" 
			jdbcType="BIGINT"/>
		<association property="workType" column="artwork_type" 
		select="com.test.dao.YsspWorkTypeMapper.selectByPrimaryKey">
		</association>
	</resultMap>
	
	
	
	
	
	
	<resultMap id="ResultMapWithBLOBs" type="com.test.pojo.YsspArtworkWithBLOBs"
		extends="BaseResultMap">
		<result column="artwork_introduce" property="artworkIntroduce"
			jdbcType="LONGVARCHAR" />
		<result column="artwork_imgs" property="artworkImgs" jdbcType="LONGVARCHAR" />
		<result column="artRealName" property="artRealName" jdbcType="VARCHAR" />
		<result column="headPortraitUrl" property="headPortraitUrl"
			jdbcType="LONGVARCHAR" />
		<result column="artWxName" property="artWxName" jdbcType="VARCHAR" />
		<result column="followId" property="followId" jdbcType="BIGINT"/>
		<result column="collectionId" property="collectionId" jdbcType="BIGINT"/>
		<result column="favoriteId" property="favoriteId" jdbcType="BIGINT"/>
		<result column="artworkCount" property="artworkCount" jdbcType="BIGINT"/>
		
	<association property="ysspUserRealName" javaType="com.test.pojo.YsspUserRealName">
		<result column="real_name_userId" property="realNameUserid" jdbcType="BIGINT" />
		<result column="real_name_username" property="realNameUsername"
			jdbcType="VARCHAR" />
		<result column="real_name_DocumentType" property="realNameDocumenttype"
			jdbcType="TINYINT" />
		<result column="real_name_Document_num" property="realNameDocumentNum"
			jdbcType="VARCHAR" />
		<result column="real_name_Document_tel" property="realNameDocumentTel"
			jdbcType="VARCHAR" />
		<result column="real_name_email" property="realNameEmail"
			jdbcType="VARCHAR" />
		<result column="real_name_Country" property="realNameCountry"
			jdbcType="VARCHAR" />
		<result column="real_name_province" property="realNameProvince"
			jdbcType="VARCHAR" />
		<result column="real_name_city" property="realNameCity"
			jdbcType="VARCHAR" />
		<result column="real_name_createTime" property="realNameCreatetime"
			jdbcType="VARCHAR" />
		<result column="real_name_updateTime" property="realNameUpdatetime"
			jdbcType="VARCHAR" />
		<result column="real_name_status" property="realNameStatus"
			jdbcType="TINYINT" />
		<result column="real_name_remark" property="realNameRemark"
			jdbcType="VARCHAR" />
		<result column="Document_front" property="documentFront"
			jdbcType="LONGVARCHAR" />
		<result column="Document_Back" property="documentBack"
			jdbcType="LONGVARCHAR" />
	</association>
		
		
	</resultMap>

	<!-- 艺术大咖视图对象 -->
	<resultMap id="ysspArtWorkCafeVo" type="com.test.pojo.YsspArtWorkCafeVo"
		extends="BaseResultMap">
		<result column="artwork_introduce" property="artworkIntroduce"
			jdbcType="LONGVARCHAR" />
		<result column="artwork_imgs" property="artworkImgs" jdbcType="LONGVARCHAR" />
		<result column="ID" property="id" jdbcType="BIGINT" />
		<result column="userID" property="userid" jdbcType="VARCHAR" />
		<result column="username" property="username" jdbcType="VARCHAR" />
		<result column="openID" property="openid" jdbcType="VARCHAR" />
		<result column="wxName" property="wxname" jdbcType="VARCHAR" />
		<result column="Head_portrait_url" property="headPortraitUrl"
			jdbcType="VARCHAR" />
		<result column="telephone" property="telephone" jdbcType="VARCHAR" />
		<result column="email" property="email" jdbcType="VARCHAR" />
		<result column="password" property="password" jdbcType="VARCHAR" />
		<result column="sex" property="sex" jdbcType="VARCHAR" />
	</resultMap>

	<sql id="Base_Column_List">
		artwork_id, artwork_name, artwork_authorId, artwork_type,
		artwork_width,
		artwork_height,
		artwork_weigth, artwork_year,
		artwork_Label, artwork_examine_status, artwork_status,
		artwork_createTime, artwork_updateTime, artwork_Auditor,
		artwork_browse_Number, artwork_comment_Number,
		artwork_likes_Number,
		artwork_share_Number, artwork_remark ,artwork_accredit_user
	</sql>
	<sql id="Blob_Column_List">
		artwork_introduce, artwork_imgs
	</sql>

	<sql id="user_sql">
		ID, userID, username, openID, wxName,
		Head_portrait_url, telephone,
		email,
		password,
		sex
	</sql>

	<!-- 查询艺术家的其他作品信息 -->
	<select id="selectOtherWorkByAuthorId" resultMap="ResultMapWithBLOBs">
		select
		<include refid="Base_Column_List" />
		,
		<include refid="Blob_Column_List" />
		from yssp_artwork
		where artwork_authorId = #{artworkAuthorid,jdbcType=BIGINT}
		AND
		artwork_status=1 AND artwork_examine_status = 1
	</select>

	<!-- 根据艺术品id查询艺术品详情 -->
	<select id="selectByPrimaryKey" resultMap="ResultMapWithBLOBs"
		parameterType="java.lang.Long">
		select
		<include refid="Base_Column_List" />
		,
		<include refid="Blob_Column_List" />
		from yssp_artwork
		where artwork_id = #{artworkId,jdbcType=BIGINT}
	</select>

	

	<!-- 查询出所有的艺术大咖对象 -->
	<select id="selectAllArtistCafe" resultMap="ysspArtWorkCafeVo">
		SELECT
		<include refid="Base_Column_List" />
		,
		<include refid="Blob_Column_List" />
		,
		<include refid="user_sql" />
		from yssp_art_user
	</select>

	<!-- 根据审核状态查询审核列表 -->
	<select id="selectListByExamineStatus" resultMap="ResultMapWithBLOBs"
		parameterType="java.lang.Integer">
		select
		<include refid="Base_Column_List" />
		,
		<include refid="Blob_Column_List" />
		from yssp_artwork
		WHERE
		artwork_examine_status=#{examineStatus}
		AND
		artwork_status=1
		ORDER BY artwork_updateTime DESC
	</select>
	
	
		<!-- 根据审核状态查询审核列表 -->
	<select id="selectAllArtWorkByName" resultMap="ResultMapWithBLOBs"
		parameterType="java.lang.Integer">
		select
		<include refid="Base_Column_List" />
		,
		<include refid="Blob_Column_List" />
		from yssp_artwork
		WHERE
		artwork_status=1
		<if test="examineStatus != null and examineStatus !=''">
		AND	artwork_examine_status=#{examineStatus}
		</if>
		AND artwork_name like CONCAT('%',#{artName},'%')
		ORDER BY artwork_updateTime DESC
	</select>
	
	
	

	<!-- 插入艺术品返回自增主键 -->
	<insert id="frontInsertArtWork" parameterType="com.test.pojo.YsspArtworkWithBLOBs"
		keyProperty="artworkId" useGeneratedKeys="true">
		insert into
		yssp_artwork (artwork_name, artwork_authorId,
		artwork_type,
		artwork_width, artwork_height,
		artwork_weigth,
		artwork_year,
		artwork_Label,
		artwork_examine_status, artwork_status,
		artwork_createTime,
		artwork_updateTime, artwork_Auditor,
		artwork_browse_Number,
		artwork_comment_Number, artwork_likes_Number,
		artwork_share_Number, artwork_remark, artwork_introduce,
		artwork_imgs,artwork_accredit_user)
		values (#{artworkName,jdbcType=VARCHAR},
		#{artworkAuthorid,jdbcType=BIGINT},
		#{artworkType,jdbcType=TINYINT},
		#{artworkWidth,jdbcType=VARCHAR}, #{artworkHeight,jdbcType=VARCHAR},
		#{artworkWeigth,jdbcType=VARCHAR}, #{artworkYear,jdbcType=VARCHAR},
		#{artworkLabel,jdbcType=VARCHAR},
		#{artworkExamineStatus,jdbcType=TINYINT},
		#{artworkStatus,jdbcType=TINYINT},
		#{artworkCreatetime,jdbcType=VARCHAR},
		#{artworkUpdatetime,jdbcType=VARCHAR},
		#{artworkAuditor,jdbcType=BIGINT},
		#{artworkBrowseNumber,jdbcType=BIGINT},
		#{artworkCommentNumber,jdbcType=BIGINT},
		#{artworkLikesNumber,jdbcType=BIGINT},
		#{artworkShareNumber,jdbcType=BIGINT},
		#{artworkRemark,jdbcType=VARCHAR},
		#{artworkIntroduce,jdbcType=LONGVARCHAR},
		#{artworkImgs,jdbcType=LONGVARCHAR},
		#{artworkAccreditUser,jdbcType=BIGINT})

	</insert>

	<!-- 添加一个艺术品 -->
	<insert id="insertArtwork" parameterType="com.test.pojo.YsspArtworkWithBLOBs">
		insert into
		yssp_artwork (artwork_id, artwork_name, artwork_authorId,
		artwork_type, artwork_width, artwork_height,
		artwork_weigth,
		artwork_year, artwork_Label,
		artwork_examine_status, artwork_status,
		artwork_createTime,
		artwork_updateTime, artwork_Auditor,
		artwork_browse_Number,
		artwork_comment_Number, artwork_likes_Number,
		artwork_share_Number, artwork_remark, artwork_introduce,
		artwork_imgs)
		values (#{artworkId,jdbcType=BIGINT}, #{artworkName,jdbcType=VARCHAR},
		#{artworkAuthorid,jdbcType=BIGINT},
		#{artworkType,jdbcType=TINYINT},
		#{artworkWidth,jdbcType=VARCHAR}, #{artworkHeight,jdbcType=VARCHAR},
		#{artworkWeigth,jdbcType=VARCHAR}, #{artworkYear,jdbcType=VARCHAR},
		#{artworkLabel,jdbcType=VARCHAR},
		#{artworkExamineStatus,jdbcType=TINYINT},
		#{artworkStatus,jdbcType=TINYINT},
		#{artworkCreatetime,jdbcType=VARCHAR},
		#{artworkUpdatetime,jdbcType=VARCHAR},
		#{artworkAuditor,jdbcType=BIGINT},
		#{artworkBrowseNumber,jdbcType=BIGINT},
		#{artworkCommentNumber,jdbcType=BIGINT},
		#{artworkLikesNumber,jdbcType=BIGINT},
		#{artworkShareNumber,jdbcType=BIGINT},
		#{artworkRemark,jdbcType=VARCHAR},
		#{artworkIntroduce,jdbcType=LONGVARCHAR},
		#{artworkImgs,jdbcType=LONGVARCHAR})
	</insert>

	<!-- 更新一个艺术品信息 -->
	<update id="updateArtwork" parameterType="com.test.pojo.YsspArtworkWithBLOBs">
		update yssp_artwork
		<set>
			<if test="artworkName != null">
				artwork_name = #{artworkName,jdbcType=VARCHAR},
			</if>
			<if test="artworkAuthorid != null">
				artwork_authorId = #{artworkAuthorid,jdbcType=BIGINT},
			</if>
			<if test="artworkType != null">
				artwork_type = #{artworkType,jdbcType=TINYINT},
			</if>
			<if test="artworkWidth != null">
				artwork_width = #{artworkWidth,jdbcType=VARCHAR},
			</if>
			<if test="artworkHeight != null">
				artwork_height = #{artworkHeight,jdbcType=VARCHAR},
			</if>
			<if test="artworkWeigth != null">
				artwork_weigth = #{artworkWeigth,jdbcType=VARCHAR},
			</if>
			<if test="artworkYear != null">
				artwork_year = #{artworkYear,jdbcType=VARCHAR},
			</if>
			<if test="artworkLabel != null">
				artwork_Label = #{artworkLabel,jdbcType=VARCHAR},
			</if>
			<if test="artworkExamineStatus != null">
				artwork_examine_status =
				#{artworkExamineStatus,jdbcType=TINYINT},
			</if>
			<if test="artworkStatus != null">
				artwork_status = #{artworkStatus,jdbcType=TINYINT},
			</if>
			<if test="artworkCreatetime != null">
				artwork_createTime =
				#{artworkCreatetime,jdbcType=VARCHAR},
			</if>
			<if test="artworkUpdatetime != null">
				artwork_updateTime =
				#{artworkUpdatetime,jdbcType=VARCHAR},
			</if>
			<if test="artworkAuditor != null">
				artwork_Auditor = #{artworkAuditor,jdbcType=BIGINT},
			</if>
			<if test="artworkBrowseNumber != null">
				artwork_browse_Number =
				#{artworkBrowseNumber,jdbcType=BIGINT},
			</if>
			<if test="artworkCommentNumber != null">
				artwork_comment_Number =
				#{artworkCommentNumber,jdbcType=BIGINT},
			</if>
			<if test="artworkLikesNumber != null">
				artwork_likes_Number =
				#{artworkLikesNumber,jdbcType=BIGINT},
			</if>
			<if test="artworkShareNumber != null">
				artwork_share_Number =
				#{artworkShareNumber,jdbcType=BIGINT},
			</if>
			<if test="artworkRemark != null">
				artwork_remark = #{artworkRemark,jdbcType=VARCHAR},
			</if>
			<if test="artworkIntroduce != null">
				artwork_introduce =
				#{artworkIntroduce,jdbcType=LONGVARCHAR},
			</if>
			<if test="artworkImgs != null">
				artwork_imgs = #{artworkImgs,jdbcType=LONGVARCHAR},
			</if>
		</set>
		where artwork_id = #{artworkId,jdbcType=BIGINT}
	</update>

	<select id="selectAllArtworkByAuthorId" resultMap="ResultMapWithBLOBs">
		SELECT
		yaw.*,
		qu.Head_portrait_url AS headPortraitUrl,
		qu.wxName AS artWxName,
		yurn.real_name_username AS artRealName,
		yf.follow_id AS followId,
		yc.collection_id AS collectionId,
		yfv.favorite_id AS favoriteId,
		yurn.*
		FROM
		yssp_artwork yaw
		INNER JOIN yssp_artist yat ON yaw.artwork_authorId =yat.artist_id AND yat.artist_status =1
		INNER JOIN qy_user_integral_view qu ON yaw.artwork_authorId =qu.ID
		INNER JOIN yssp_user_real_name yurn ON yaw.artwork_authorId = yurn.real_name_userId AND yurn.real_name_status =1
		LEFT JOIN yssp_follow yf ON yaw.artwork_authorId =yf.follow_concerned_people AND yf.follow_to_people=#{userId}
		LEFT JOIN yssp_collection yc ON yaw.artwork_id =yc.collection_works_id AND yc.collection_user_id=#{userId}
		LEFT JOIN yssp_favorite yfv ON yaw.artwork_id =yfv.favorite_works_id AND yfv.favorite_user_id=#{userId}
		WHERE 
		yaw.artwork_status =1
		AND yaw.artwork_examine_status =1 
		GROUP BY
			yaw.artwork_id
		ORDER BY
		yaw.artwork_browse_Number
		desc
	</select>
	
	<select id="selectAllArtworkByAuthorIdNew" resultMap="ResultMapWithBLOBs">
		SELECT
		yaw.*,
		qu.Head_portrait_url AS headPortraitUrl,
		qu.wxName AS artWxName,
		yurn.real_name_username AS artRealName,
		yf.follow_id AS followId,
		yc.collection_id AS collectionId,
		yfv.favorite_id AS favoriteId,
		yurn.*
		FROM
		yssp_artwork yaw
		INNER JOIN yssp_artist yat ON yaw.artwork_authorId =yat.artist_id AND yat.artist_status =1
		INNER JOIN qy_user_integral_view qu ON yaw.artwork_authorId =qu.ID
		INNER JOIN yssp_user_real_name yurn ON yaw.artwork_authorId = yurn.real_name_userId AND yurn.real_name_status =1
		LEFT JOIN yssp_follow yf ON yaw.artwork_authorId =yf.follow_concerned_people AND yf.follow_to_people=#{userId}
		LEFT JOIN yssp_collection yc ON yaw.artwork_id =yc.collection_works_id AND yc.collection_user_id=#{userId}
		LEFT JOIN yssp_favorite yfv ON yaw.artwork_id =yfv.favorite_works_id AND yfv.favorite_user_id=#{userId}
		WHERE 
		yaw.artwork_status =1
		AND yaw.artwork_examine_status =1 
		AND yaw.artwork_id IN
		<foreach collection="idList" index="index" item="item" open="(" separator="," close=")">
			#{item}
		</foreach> 
		GROUP BY
			yaw.artwork_id
		ORDER BY
		yaw.artwork_browse_Number
		desc
	</select>
	
	
	<update id="updateBrowseNumber">
		UPDATE
		yssp_artwork
		SET
		artwork_browse_Number =artwork_browse_Number+1
		WHERE
		artwork_id =#{artworkId,jdbcType=BIGINT}
	</update>
	
	<update id="updateLikesNumber">
		UPDATE
		yssp_artwork
		SET
		artwork_likes_Number =artwork_likes_Number + #{num,jdbcType=INTEGER}
		WHERE
		artwork_id =#{artworkId,jdbcType=BIGINT}
	</update>
	
	
		<update id="updateShareNumber">
		UPDATE
		yssp_artwork
		SET
		artwork_share_Number =artwork_share_Number + 1
		WHERE
		artwork_id =#{artworkId,jdbcType=BIGINT}
	</update>
	
	
	<select id="selectAllArtworkByfollow" resultMap="ResultMapWithBLOBs">
		SELECT
		yaw.*,
		qu.Head_portrait_url AS headPortraitUrl,
		qu.wxName AS artWxName,
		yurn.real_name_username AS artRealName,
		yf.follow_id AS followId,
		yfv.favorite_id AS favoriteId
		FROM
		yssp_artwork yaw
		INNER JOIN yssp_artist yat ON yaw.artwork_authorId =yat.artist_id AND yat.artist_status =1
		INNER JOIN qy_user_integral_view qu ON yaw.artwork_authorId =qu.ID
		INNER JOIN yssp_user_real_name yurn ON yaw.artwork_authorId = yurn.real_name_userId AND yurn.real_name_status =1
		INNER JOIN yssp_follow yf ON yaw.artwork_authorId =yf.follow_concerned_people AND yf.follow_to_people=#{userId}
		LEFT JOIN yssp_favorite yfv ON yaw.artwork_id =yfv.favorite_works_id AND yfv.favorite_user_id=#{userId}
		WHERE 
		yaw.artwork_status =1
		AND yaw.artwork_examine_status =1 
		GROUP BY
		yaw.artwork_id
		ORDER BY
		yaw.artwork_browse_Number
		desc
	</select>

	<select id="selelctAllArtworkByAuthorId" resultMap="ResultMapWithBLOBs">
		SELECT 
		ya.*,
		yf.favorite_id AS favoriteId
		FROM 
		yssp_artwork ya 
		LEFT JOIN yssp_favorite yf ON ya.artwork_id = yf.favorite_works_id AND yf.favorite_user_id =#{userId}
		WHERE 
		ya.artwork_status =1 
		AND 
		ya.artwork_authorId =#{authorId}
		<if test="examineStatus !=0">
			AND	ya.artwork_examine_status = #{examineStatus}
		</if>
		GROUP BY
		ya.artwork_id
		ORDER BY
		ya.artwork_createTime
		DESC
	</select>
	<select id="selectAllArtworkByDate" resultMap="ResultMapWithBLOBs">
		SELECT
		yaw.*,
		qu.Head_portrait_url AS headPortraitUrl,
		qu.wxName AS artWxName,
		yurn.real_name_username AS artRealName,
		yf.follow_id AS followId,
		yc.collection_id AS collectionId,
		yfv.favorite_id AS favoriteId,
		yurn.*,
		(SELECT count(*) FROM yssp_artwork y
		INNER JOIN yssp_artist yat ON y.artwork_authorId =yat.artist_id AND yat.artist_status =1
		INNER JOIN qy_user_integral_view qu ON y.artwork_authorId =qu.ID
		INNER JOIN yssp_user_real_name yurn ON y.artwork_authorId = yurn.real_name_userId AND yurn.real_name_status =1
		WHERE 
		y.artwork_status =1
		AND y.artwork_examine_status =1
		) AS artworkCount
		FROM
		yssp_artwork yaw
		INNER JOIN yssp_artist yat ON yaw.artwork_authorId =yat.artist_id AND yat.artist_status =1
		INNER JOIN qy_user_integral_view qu ON yaw.artwork_authorId =qu.ID
		INNER JOIN yssp_user_real_name yurn ON yaw.artwork_authorId = yurn.real_name_userId AND yurn.real_name_status =1
		LEFT JOIN yssp_follow yf ON yaw.artwork_authorId =yf.follow_concerned_people AND yf.follow_to_people=#{userId}
		LEFT JOIN yssp_collection yc ON yaw.artwork_id =yc.collection_works_id AND yc.collection_user_id=#{userId}
		LEFT JOIN yssp_favorite yfv ON yaw.artwork_id =yfv.favorite_works_id AND yfv.favorite_user_id=#{userId}
		WHERE 
		yaw.artwork_status =1
		AND yaw.artwork_examine_status =1 
		GROUP BY
		yaw.artwork_id
		ORDER BY
		yaw.artwork_createTime
		desc
	</select>
	
	
	<select id="selectAllArtworkByDateNew" resultMap="ResultMapWithBLOBs">
		SELECT
		yaw.*,
		qu.Head_portrait_url AS headPortraitUrl,
		qu.wxName AS artWxName,
		yurn.real_name_username AS artRealName,
		yf.follow_id AS followId,
		yc.collection_id AS collectionId,
		yfv.favorite_id AS favoriteId,
		yurn.*,
		(SELECT count(*) FROM yssp_artwork y
		INNER JOIN yssp_artist yat ON y.artwork_authorId =yat.artist_id AND yat.artist_status =1
		INNER JOIN qy_user_integral_view qu ON y.artwork_authorId =qu.ID
		INNER JOIN yssp_user_real_name yurn ON y.artwork_authorId = yurn.real_name_userId AND yurn.real_name_status =1
		WHERE 
		y.artwork_status =1
		AND y.artwork_examine_status =1
		) AS artworkCount
		FROM
		yssp_artwork yaw
		INNER JOIN yssp_artist yat ON yaw.artwork_authorId =yat.artist_id AND yat.artist_status =1
		INNER JOIN qy_user_integral_view qu ON yaw.artwork_authorId =qu.ID
		INNER JOIN yssp_user_real_name yurn ON yaw.artwork_authorId = yurn.real_name_userId AND yurn.real_name_status =1
		LEFT JOIN yssp_follow yf ON yaw.artwork_authorId =yf.follow_concerned_people AND yf.follow_to_people=#{userId}
		LEFT JOIN yssp_collection yc ON yaw.artwork_id =yc.collection_works_id AND yc.collection_user_id=#{userId}
		LEFT JOIN yssp_favorite yfv ON yaw.artwork_id =yfv.favorite_works_id AND yfv.favorite_user_id=#{userId}
		WHERE 
		yaw.artwork_status =1
		AND yaw.artwork_examine_status =1 
		AND
			yaw.artwork_id IN
		<foreach collection="idList" index="index" item="item" open="(" separator="," close=")">
			#{item}
		</foreach>
		GROUP BY
		yaw.artwork_id
		ORDER BY
		yaw.artwork_createTime
		desc
	</select>
	
	
	
	
	
	
	<select id="selectArtworkDetailById" resultMap="ResultMapWithBLOBs">
		SELECT
			yaw.*,
			yf.favorite_id AS favoriteId,
			yc.collection_id AS collectionId,
			yca.Custom_Artwork_id AS customArtworkId,
			yca.Custom_Artwork_remark AS customArtworkRemark
		FROM
			yssp_artwork yaw
		LEFT JOIN
			yssp_favorite yf ON yaw.artwork_id =yf.favorite_works_id 
		AND 
			yf.favorite_user_id =#{userId}
		AND	
			yf.favorite_works_type = 1
		LEFT JOIN
			yssp_collection yc ON yaw.artwork_id =yc.collection_works_id
		AND
			yc.collection_works_type =1
		AND	
			yc.collection_user_id =#{userId}
		LEFT JOIN
			yssp_custom_artwork yca ON yca.Custom_Artwork_artId = yaw.artwork_id 
		AND 
			yca.Custom_Artwork_status = 1
		WHERE
			yaw.artwork_id =#{artworkId}
		AND
			yaw.artwork_examine_status =1
		AND
			yaw.artwork_status =1
		GROUP BY
			yaw.artwork_id
	</select>
	<select id="selectRecommendWork" resultMap="ResultMapWithBLOBs">
			SELECT
			yaw.*,
			qu.Head_portrait_url AS headPortraitUrl,
			qu.wxName AS artWxName,
			yurn.real_name_username AS artRealName,
			yf.follow_id AS followId,
			yc.collection_id AS collectionId,
			yfv.favorite_id AS favoriteId
			FROM
			yssp_artwork yaw
			INNER JOIN yssp_artist yat ON yaw.artwork_authorId =yat.artist_id AND yat.artist_status =1
			INNER JOIN qy_user_integral_view qu ON yaw.artwork_authorId =qu.ID
			INNER JOIN yssp_user_real_name yurn ON yaw.artwork_authorId = yurn.real_name_userId AND yurn.real_name_status =1
			LEFT JOIN yssp_follow yf ON yaw.artwork_authorId =yf.follow_concerned_people AND yf.follow_to_people=#{userId}
			LEFT JOIN yssp_collection yc ON yaw.artwork_id =yc.collection_works_id AND yc.collection_user_id=#{userId}
			LEFT JOIN yssp_favorite yfv ON yaw.artwork_id =yfv.favorite_works_id AND yfv.favorite_user_id=#{userId}
			WHERE 
			yaw.artwork_status =1
			AND yaw.artwork_examine_status =1 
			AND yaw.artwork_id !=#{artWorkId}
			GROUP BY
				yaw.artwork_id
			ORDER BY
				yaw.artwork_createTime
			desc
	</select>
</mapper>